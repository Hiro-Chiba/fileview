# FileView キーバインド

FileView (fv) の完全なキーバインドリファレンス。

[English](KEYBINDINGS.md) | [日本語](KEYBINDINGS_ja.md)

## ナビゲーション

| キー | 動作 |
|------|------|
| `j` / `↓` | 下に移動 |
| `k` / `↑` | 上に移動 |
| `g` | 先頭へ |
| `G` | 末尾へ |

## ツリー操作

| キー | 動作 |
|------|------|
| `l` / `Tab` | ディレクトリを展開 |
| `h` / `Backspace` | ディレクトリを折りたたむ |
| `→` | ディレクトリを展開（プレビュー表示中はプレビューにフォーカス移動） |
| `←` | ディレクトリを折りたたむ（プレビュー表示中はツリーにフォーカス移動） |
| `Enter` | 展開/折りたたみ切り替え |
| `H` | すべて折りたたむ |
| `L` | すべて展開（深さ制限: 5） |

## 選択

| キー | 動作 |
|------|------|
| `Space` | マーク切り替え |
| `Esc` | マークをすべて解除 |

## ファイル操作

| キー | 動作 |
|------|------|
| `a` | 新規ファイル作成 |
| `A` | 新規ディレクトリ作成 |
| `r` | リネーム |
| `D` / `Delete` | 削除（確認あり） |
| `y` | クリップボードにコピー |
| `d` | クリップボードにカット |
| `p` | ペースト |

## 検索

| キー | 動作 |
|------|------|
| `/` | 検索開始（もう一度押すとキャンセル） |
| `n` | 次の検索結果 |
| `N` | 前の検索結果 |
| `Ctrl+P` | ファジーファインダーを開く |

マッチ数はステータスバーに表示されます（例: `3/12 matches`）。

## ソート

| キー | 動作 |
|------|------|
| `S` | ソートモード切り替え: 名前 → サイズ → 日付 → 名前 |

- **名前**: アルファベット順（大文字小文字区別なし）
- **サイズ**: 大きいファイルが先頭
- **日付**: 新しいファイルが先頭
- ディレクトリは各モード内で常に先頭にソート
- デフォルト以外のソートモードはステータスバーに表示

### ファジーファインダー

`Ctrl+P` でビルトインのファジーファインダーを開く:

| キー | 動作 |
|------|------|
| `↑` / `Ctrl+K` | 上の結果へ移動 |
| `↓` / `Ctrl+J` | 下の結果へ移動 |
| `Enter` | 選択したファイルにジャンプ |
| `Esc` / `Ctrl+P` | キャンセル |

- 入力するとファイル名でフィルタリング
- 結果はマッチスコア順にソート
- 隠しファイルは現在の表示設定に従う

## プレビュー

| キー | 動作 |
|------|------|
| `P` | サイドプレビューパネル切り替え |
| `o` | フルスクリーンプレビュー |
| `Tab` | ツリー/プレビュー間のフォーカス切り替え（プレビュー表示時） |
| `←` / `→` | ツリー（左）/ プレビュー（右）へフォーカス移動 |
| `[` | PDFの前のページ |
| `]` | PDFの次のページ |

### サイドプレビューのフォーカスモード

サイドプレビュー表示中に `Tab` または矢印キーでフォーカスを切り替え:

| フォーカス | j/k/↑/↓ | g/G | b/f |
|------------|---------|-----|-----|
| ツリー | ファイル移動 | 先頭/末尾 | - |
| プレビュー | スクロール | プレビュー先頭/末尾 | ページスクロール |

- パネルをクリックでフォーカス切り替え
- スクロールはフォーカス位置に応じて動作
- `Esc` でツリーにフォーカスを戻す
- フォーカス中のパネルはシアン色のボーダーでハイライト

### PDFプレビュー

PDFファイルはpoppler-utilsの`pdftoppm`を使用して画像としてレンダリングされます:

| キー | 動作 |
|------|------|
| `[` | 前のページへ |
| `]` | 次のページへ |

- `pdftoppm` (poppler-utils) のインストールが必要
- 現在のページと総ページ数がタイトルバーに表示: `document.pdf (3/10)`
- poppler-utilsがインストールされていない場合はHEXプレビューにフォールバック

## システムクリップボード

| キー | 動作 |
|------|------|
| `c` | パスをシステムクリップボードにコピー |
| `C` | ファイル名をシステムクリップボードにコピー |

## ブックマーク

`m` に続けて数字 (1-9) でブックマーク設定、`'` に続けて数字でジャンプ:

| キー | 動作 |
|------|------|
| `m1`-`m9` | スロット1-9にブックマーク設定 |
| `'1`-`'9` | スロット1-9のブックマークにジャンプ |
| `m` / `'` | キャンセル（数字なしでもう一度押す） |

- ブックマークは現在のセッション中のみ有効
- 設定時にブックマーク先のパスがステータスに表示される
- 未設定のブックマークへのジャンプ時は「Bookmark N not set」と表示

## ファイルフィルター

`F` でフィルター設定/解除:

| キー | 動作 |
|------|------|
| `F` | フィルター入力を開く / フィルター解除 |
| `Enter` | フィルター適用 |
| `Esc` / `F` | キャンセル |

- グロブパターン対応: `*` (任意の文字列), `?` (任意の1文字)
- 例: `*.rs`, `test*`, `*_test.py`
- ディレクトリは常に表示（ナビゲーション用）
- アクティブなフィルターはステータスバーにアイコン付きで表示
- フィルター適用中に `F` で解除

## その他

| キー | 動作 |
|------|------|
| `.` | 隠しファイル表示切り替え |
| `R` / `F5` | リフレッシュ |
| `?` | ヘルプ表示 |
| `q` | 終了 |
| `Q` | 終了して現在のディレクトリにcd（`--choosedir`使用時） |

## マウス対応

| 操作 | 効果 |
|------|------|
| クリック | アイテムを選択 |
| ダブルクリック | ディレクトリの展開/折りたたみ、またはプレビューを開く |
| スクロール | リストの移動またはプレビューのスクロール |
| ドラッグ | ファイルの移動（実験的） |
