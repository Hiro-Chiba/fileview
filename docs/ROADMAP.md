# FileView - Implementation Roadmap

## Overview

ãƒ¢ãƒ€ãƒ³ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‘ã‘ã®ãƒŸãƒ‹ãƒãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼UIã‚’å®Ÿè£…ã™ã‚‹ã€‚

---

## Phase 1: Foundation

- [x] 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
  - Cargo.toml
  - .gitignore
  - PR: `chore: Initialize Rust project`

- [x] 1.2 CIè¨­å®š
  - .github/workflows/ci.yml
  - PR: `chore: Set up GitHub Actions CI`

- [x] 1.3 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ ä½œæˆ
  - src/lib.rs + å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®mod.rs
  - PR: `chore: Set up module structure`

---

## Phase 2: Core Module

- [x] 2.1 core/state.rs
  - AppStateæ§‹é€ ä½“
  - PR: `feat(core): Define AppState`

- [x] 2.2 core/mode.rs
  - ViewMode enumï¼ˆçŠ¶æ…‹å†…åŒ…å‹ï¼‰
  - InputPurpose, PendingAction
  - PR: `feat(core): Define ViewMode with embedded state`

---

## Phase 3: Tree Module

- [x] 3.1 tree/node.rs
  - TreeEntryæ§‹é€ ä½“
  - PR: `feat(tree): Define TreeEntry`

- [x] 3.2 tree/navigator.rs
  - TreeNavigatoræ§‹é€ ä½“
  - ãƒ•ãƒ©ãƒƒãƒˆåŒ–ï¼ˆflatten / collect_visibleï¼‰
  - å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
  - PR: `feat(tree): Implement TreeNavigator with flatten`

---

## Phase 4: Action Module

- [x] 4.1 action/file.rs
  - create_file / create_dir
  - rename / delete
  - PR: `feat(action): Implement file operations`

- [x] 4.2 action/clipboard.rs
  - copy / cut / paste
  - Clipboardæ§‹é€ ä½“
  - PR: `feat(action): Implement clipboard operations`

---

## Phase 5: Render Module

- [x] 5.1 render/tree.rs
  - ãƒ„ãƒªãƒ¼æç”»
  - PR: `feat(render): Implement tree rendering`

- [x] 5.2 render/preview.rs
  - ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆåŠãƒ–ãƒ­ãƒƒã‚¯ï¼‰
  - PR: `feat(render): Implement preview rendering`

- [x] 5.3 render/status.rs
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
  - å…¥åŠ›UI
  - PR: `feat(render): Implement status bar`

---

## Phase 6: Handler Module

- [x] 6.1 handler/key.rs
  - ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
  - ãƒ¢ãƒ¼ãƒ‰åˆ¥ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  - PR: `feat(handler): Implement key handling`

- [x] 6.2 handler/mouse.rs
  - ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
  - ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ¤œå‡º
  - PR: `feat(handler): Implement mouse handling`

- [x] 6.3 DropDetector
  - D&Dæ¤œå‡º
  - PR: `feat(handler): Implement drag and drop detection`

---

## Phase 7: Integrate Module

- [x] 7.1 integrate/pick.rs
  - --pick ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  - stdoutå‡ºåŠ›
  - çµ‚äº†ã‚³ãƒ¼ãƒ‰
  - PR: `feat(integrate): Implement --pick mode`

- [x] 7.2 integrate/callback.rs
  - --on-select ã‚ªãƒ—ã‚·ãƒ§ãƒ³
  - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å±•é–‹
  - PR: `feat(integrate): Implement --on-select callback`

---

## Phase 8: Main & Polish

- [x] 8.1 main.rs
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—
  - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«åˆæœŸåŒ–/å¾©å…ƒ
  - PR: `feat: Implement main event loop`

- [x] 8.2 README.md
  - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ä½¿ç”¨æ–¹æ³•
  - PR: `docs: Add README`

- [x] 8.3 ãƒ†ã‚¹ãƒˆ
  - tree, action ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
  - PR: `test: Add unit tests`

---

## Phase 9: Enhanced Features

### 9.1 Git ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
**å„ªå…ˆåº¦:** é«˜
**ãƒªãƒªãƒ¼ã‚¹:** v0.2.0

- [x] git/status.rs
  - Gitãƒªãƒã‚¸ãƒˆãƒªæ¤œå‡º
  - ãƒ•ã‚¡ã‚¤ãƒ«çŠ¶æ…‹å–å¾—ï¼ˆModified, Added, Untracked, Deleted, Renamed, Ignoredï¼‰
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªçŠ¶æ…‹ã®ä¼æ’­ï¼ˆå­ãƒ•ã‚¡ã‚¤ãƒ«ã®çŠ¶æ…‹ã‚’è¦ªã«åæ˜ ï¼‰
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼‰
- [x] render/tree.rs æ‹¡å¼µ
  - çŠ¶æ…‹åˆ¥ã‚«ãƒ©ãƒ¼è¡¨ç¤º
    - Modified: Yellow
    - Added/Untracked: Green
    - Deleted: Red
    - Renamed: Cyan
    - Ignored: DarkGray
- [x] render/status.rs æ‹¡å¼µ
  - ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒåè¡¨ç¤º
- [x] PR: `feat(git): Add git status display`

**å®Ÿè£…è©³ç´°:**
```rust
pub struct GitStatus {
    repo_root: PathBuf,
    statuses: HashMap<PathBuf, FileStatus>,
}

pub enum FileStatus {
    Modified,
    Added,
    Untracked,
    Deleted,
    Renamed,
    Ignored,
    Conflict,
    Clean,
}
```

---

### 9.2 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæƒ…å ±è¡¨ç¤º
**å„ªå…ˆåº¦:** ä¸­
**ãƒªãƒªãƒ¼ã‚¹:** v0.3.0

- [x] render/preview.rs æ‹¡å¼µ
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé¸æŠæ™‚ã®æƒ…å ±è¡¨ç¤º
    - ãƒ•ã‚¡ã‚¤ãƒ«æ•°
    - ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•°
    - éš ã—ãƒ•ã‚¡ã‚¤ãƒ«æ•°
    - åˆè¨ˆã‚µã‚¤ã‚ºï¼ˆhuman-readable: KB, MB, GBï¼‰
  - æ·±ã•åˆ¶é™ä»˜ãã‚µã‚¤ã‚ºè¨ˆç®—ï¼ˆdepth=3ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºä¿ï¼‰
- [x] PR: `feat(preview): Add directory info display`

**è¡¨ç¤ºä¾‹:**
```
ğŸ“ src/
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Files:        42
Directories:   8
Hidden:        2
Total Size:  1.2 MB
```

---

### 9.3 Hex ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
**å„ªå…ˆåº¦:** ä¸­
**ãƒªãƒªãƒ¼ã‚¹:** v0.4.0

- [x] render/preview.rs æ‹¡å¼µ
  - ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡º
  - xxdå½¢å¼ã®Hexãƒ€ãƒ³ãƒ—è¡¨ç¤º
    - ã‚ªãƒ•ã‚»ãƒƒãƒˆ | Hex (16ãƒã‚¤ãƒˆ) | ASCII
  - ãƒ†ã‚­ã‚¹ãƒˆ/ãƒã‚¤ãƒŠãƒªè‡ªå‹•åˆ¤å®š
- [x] PR: `feat(preview): Add hex preview for binary files`

**è¡¨ç¤ºä¾‹:**
```
00000000: 7f45 4c46 0201 0100 0000 0000 0000 0000  .ELF............
00000010: 0300 3e00 0100 0000 1010 0000 0000 0000  ..>.............
00000020: 4000 0000 0000 0000 9019 0000 0000 0000  @...............
```

---

## Progress Summary

| Phase | Items | Completed |
|-------|-------|-----------|
| 1. Foundation | 3 | 3 |
| 2. Core | 2 | 2 |
| 3. Tree | 2 | 2 |
| 4. Action | 2 | 2 |
| 5. Render | 3 | 3 |
| 6. Handler | 3 | 3 |
| 7. Integrate | 2 | 2 |
| 8. Main & Polish | 3 | 3 |
| 9. Enhanced Features | 3 | 3 |
| 10. Code Quality | 3 | 3 |
| 11. Nerd Fonts Icons | 3 | 3 |
| 12. Test Improvements | 6 | 6 |
| 13. E2E / Behavioral Tests | 4 | 3 |
| 14. Side Preview Focus | 5 | 5 |
| 15. Image Protocol Support | 7 | 6 |
| **Total** | **51** | **49** |

---

## Release Plan

| Version | Feature | Status |
|---------|---------|--------|
| v0.1.x | Initial release | âœ… Published |
| v0.2.0 | Git status display | âœ… Published |
| v0.3.0 | Directory info | âœ… Published |
| v0.4.0 | Hex preview | âœ… Published |
| v0.4.4 | Ghostty drag-drop fix | âœ… Published |
| v0.4.5 | PathBuffer refactoring | âœ… Published |
| v0.4.6 | DRY improvements | âœ… Published |
| v0.4.7 | Error handling | âœ… Published |
| v0.4.8 | Constants extraction | âœ… Published |
| v0.5.0 | Nerd Fonts icons | âœ… Published |
| v0.6.0 | Test improvements | âœ… Published |
| v0.6.1 | Bug fixes (preview scroll, Enter key) | âœ… Published |

---

## Phase 10: Code Quality & Refactoring

**ãƒªãƒªãƒ¼ã‚¹:** v0.4.6

### 10.1 DRYæ”¹å–„
**å„ªå…ˆåº¦:** é«˜

- [x] ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‰ãƒ­ãƒƒãƒ—å‡¦ç†ã®çµ±åˆ
  - ç¾çŠ¶: main.rså†…ã§3ç®‡æ‰€ã«é‡è¤‡
  - è§£æ±º: `handle_file_drop()` é–¢æ•°ã«æŠ½å‡º
- [x] å®›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨ˆç®—ã®å…±é€šåŒ–
  - ç¾çŠ¶: 6ç®‡æ‰€ã§åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³
  - è§£æ±º: `get_target_directory()` ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
- [x] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒˆãƒ«å–å¾—ã®å…±é€šåŒ–
  - ç¾çŠ¶: 4ç®‡æ‰€ã§é‡è¤‡
  - è§£æ±º: `get_filename_str()` ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- [x] PR: `refactor: Extract common helper functions (DRY)`

### 10.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
**å„ªå…ˆåº¦:** ä¸­

- [x] ã‚µã‚¤ãƒ¬ãƒ³ãƒˆå¤±æ•—ã®ä¿®æ­£
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼å¤±æ•—æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥
  - ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰æ“ä½œå¤±æ•—æ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- [x] ãƒ‘ã‚¹æ“ä½œã®ã‚¨ãƒ©ãƒ¼å‡¦ç†æ”¹å–„
  - æ—¢å­˜ã® `unwrap_or_else` ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯é©åˆ‡
- [x] PR: `refactor: Improve error handling and user feedback`

### 10.3 å®šæ•°åŒ–
**å„ªå…ˆåº¦:** ä½

- [x] preview.rs ã®ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
  - `MAX_DIR_SIZE_DEPTH = 3`
  - `HEX_PREVIEW_MAX_BYTES = 4096`
  - `HEX_BYTES_PER_LINE = 16`
- [x] PR: `refactor: Extract magic numbers to constants`

---

## Phase 11: Nerd Fonts Icons

**ãƒªãƒªãƒ¼ã‚¹:** v0.5.0

### 11.1 ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
**å„ªå…ˆåº¦:** é«˜

- [x] render/icons.rs æ–°è¦ä½œæˆ
  - ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­â†’ã‚¢ã‚¤ã‚³ãƒ³ã®ãƒãƒƒãƒ”ãƒ³ã‚°
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç”¨ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ï¼‰
  - ç‰¹æ®Šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ.git, node_modules, srcç­‰ï¼‰
- [x] ä¸»è¦ãªæ‹¡å¼µå­ã‚µãƒãƒ¼ãƒˆ
  - ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª: rs, py, js, ts, go, java, c, cpp, etc.
  - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: json, yaml, toml, xml, etc.
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: md, txt, pdf, etc.
  - ãƒ¡ãƒ‡ã‚£ã‚¢: png, jpg, mp3, mp4, etc.
- [x] PR: `feat(render): Add icon mapping module`

### 11.2 ãƒ„ãƒªãƒ¼æç”»ã¸ã®çµ±åˆ
**å„ªå…ˆåº¦:** é«˜

- [x] render/tree.rs æ‹¡å¼µ
  - TreeEntryã«ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã‚’è¿½åŠ 
  - GitçŠ¶æ…‹ã‚¢ã‚¤ã‚³ãƒ³ã¨ã®å…±å­˜
- [x] ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºä½ç½®
  - `ğŸ“ dirname/` ã¾ãŸã¯ ` dirname/`
  - ` filename.rs` ã¾ãŸã¯ ` filename.py`
- [x] PR: `feat(render): Integrate icons into tree view`

### 11.3 è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³
**å„ªå…ˆåº¦:** ä¸­

- [x] CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
  - `--icons` / `-i`: ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã‚’æœ‰åŠ¹åŒ–
  - `--no-icons`: ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã‚’ç„¡åŠ¹åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- [x] ç’°å¢ƒå¤‰æ•°ã‚µãƒãƒ¼ãƒˆ
  - `FILEVIEW_ICONS=1` ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹åŒ–
- [ ] Nerd Fontæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  - Unicodeçµµæ–‡å­—ã¾ãŸã¯è¨˜å·ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [x] PR: `feat(cli): Add icon display options`

**å®Ÿè£…è©³ç´°:**
```rust
// render/icons.rs
pub fn get_file_icon(path: &Path, is_dir: bool, expanded: bool) -> &'static str {
    if is_dir {
        if expanded { "" } else { "" }
    } else {
        match path.extension().and_then(|e| e.to_str()) {
            Some("rs") => "",
            Some("py") => "",
            Some("js") => "",
            Some("ts") => "",
            Some("json") => "",
            Some("md") => "",
            Some("git") => "",
            _ => "",
        }
    }
}
```

**ã‚¢ã‚¤ã‚³ãƒ³ä¸€è¦§ï¼ˆäºˆå®šï¼‰:**

| ã‚«ãƒ†ã‚´ãƒª | æ‹¡å¼µå­ | ã‚¢ã‚¤ã‚³ãƒ³ |
|---------|--------|---------|
| Rust | .rs | `` |
| Python | .py | `` |
| JavaScript | .js | `` |
| TypeScript | .ts | `` |
| Go | .go | `` |
| JSON | .json | `` |
| YAML | .yaml, .yml | `` |
| TOML | .toml | `` |
| Markdown | .md | `` |
| Git | .git/ | `` |
| Directory | (folder) | `` / `` |
| Default | (other) | `` |

---

## Phase 12: Test Improvements

**ãƒªãƒªãƒ¼ã‚¹:** v0.6.0

### 12.1 CLIå¼•æ•°è§£æãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** é«˜

- [x] åŸºæœ¬ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
  - `--pick`, `--format`, `--on-select`
  - `--icons`, `--no-icons`
- [x] ãƒ‘ã‚¹è§£æ±ºãƒ†ã‚¹ãƒˆ
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæŒ‡å®šã€ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šã€å¼•æ•°ãªã—
- [x] ç’°å¢ƒå¤‰æ•°ãƒ†ã‚¹ãƒˆ
  - `FILEVIEW_ICONS` ã®å‹•ä½œç¢ºèª
- [x] PR: `test: Add CLI argument parsing tests`

### 12.2 ã‚¢ã‚¤ã‚³ãƒ³ãƒ†ã‚¹ãƒˆæ‹¡å……
**å„ªå…ˆåº¦:** é«˜

- [x] ä¸»è¦è¨€èªã‚¢ã‚¤ã‚³ãƒ³ï¼ˆJS, TS, Go, Java, C, C++ï¼‰
- [x] ç‰¹æ®Šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆnode_modules, target, tests, docsï¼‰
- [x] ç‰¹æ®Šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpackage.json, Dockerfile, .gitignoreï¼‰
- [x] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã€æ‹¡å¼µå­ãªã—ï¼‰
- [x] PR: `test: Expand icon mapping tests`

### 12.3 ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
**å„ªå…ˆåº¦:** ä¸­

- [x] ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ‘ã‚¹ç”Ÿæˆï¼ˆç«¶åˆæ™‚ã®é€£ç•ªï¼‰
- [x] ç‰¹æ®Šæ–‡å­—ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã€Unicodeï¼‰
- [x] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆå­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ç­‰ï¼‰
- [x] PR: `test: Add file operation edge case tests`

### 12.4 Pickå‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
**å„ªå…ˆåº¦:** ä¸­

- [x] lines/null/json å„å½¢å¼ã®å‡ºåŠ›ãƒ†ã‚¹ãƒˆ
- [x] è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®å‡ºåŠ›
- [x] ç‰¹æ®Šæ–‡å­—ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
- [x] PR: `test: Add pick output format tests`

### 12.5 Gitã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
**å„ªå…ˆåº¦:** ä¸­

- [x] éGitãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‡¦ç†
- [x] ãƒ–ãƒ©ãƒ³ãƒåã®ç‰¹æ®Šã‚±ãƒ¼ã‚¹ï¼ˆã‚¹ãƒ©ãƒƒã‚·ãƒ¥å«ã‚€ç­‰ï¼‰
- [x] PR: `test: Add git error handling tests`

### 12.6 ãƒ„ãƒªãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
**å„ªå…ˆåº¦:** ä½

- [x] ãƒ‘ã‚¹çœç•¥ãƒ­ã‚¸ãƒƒã‚¯
- [x] å¯è¦–é«˜ã•è¨ˆç®—
- [x] PR: `test: Add tree rendering tests`

**çµæœ:**
- ãƒ†ã‚¹ãƒˆæ•°: 125 â†’ 201ï¼ˆ+76ãƒ†ã‚¹ãƒˆï¼‰
- ã‚«ãƒãƒ¬ãƒƒã‚¸: 45% â†’ 70%ä»¥ä¸Š

---

## Phase 13: E2E / Behavioral Tests

**ãƒªãƒªãƒ¼ã‚¹:** v0.7.0

### èƒŒæ™¯
v0.6.1ã§ä¿®æ­£ã—ãŸãƒã‚°ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€Enterã‚­ãƒ¼å‹•ä½œï¼‰ã¯ã€æ—¢å­˜ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ã¯æ¤œå‡ºã§ããªã‹ã£ãŸã€‚
ã“ã‚Œã¯ã€KeyActionç”Ÿæˆã¨ãã®å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã®çµ±åˆéƒ¨åˆ†ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚­ãƒ¼å…¥åŠ›       â”‚ -> â”‚  KeyAction      â”‚ -> â”‚  çŠ¶æ…‹å¤‰æ›´       â”‚
â”‚  (ãƒ†ã‚¹ãƒˆæ¸ˆ)     â”‚    â”‚  (ãƒ†ã‚¹ãƒˆæ¸ˆ)     â”‚    â”‚  (ãƒ†ã‚¹ãƒˆä¸è¶³)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 13.1 ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®åˆ†é›¢
**å„ªå…ˆåº¦:** é«˜

- [x] main.rsã‹ã‚‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢
  - `handler/action.rs` æ–°è¦ä½œæˆ
  - `handle_action(state, navigator, action, ...)` é–¢æ•°
- [x] ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªæ§‹é€ ã«å¤‰æ›´
  - å‰¯ä½œç”¨ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«I/Oï¼‰ã‚’åˆ†é›¢
  - çŠ¶æ…‹å¤‰æ›´ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½ã«
- [x] PR: `refactor: Extract action execution logic` (#37)

### 13.2 çŠ¶æ…‹é·ç§»ãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** é«˜

- [x] ToggleExpandã®å‹•ä½œãƒ†ã‚¹ãƒˆ
  - ãƒ•ã‚¡ã‚¤ãƒ« + ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼éè¡¨ç¤º â†’ ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - ãƒ•ã‚¡ã‚¤ãƒ« + ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º â†’ ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‰ã˜ã‚‹
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª â†’ å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
- [x] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ
  - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¢—æ¸›ã®å‹•ä½œç¢ºèª
  - å¢ƒç•Œå€¤ï¼ˆ0ã§ã®ã‚µãƒãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- [x] PR: `test: Add state transition tests`

### 13.3 ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** ä¸­

- [x] æ“ä½œã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®ãƒ†ã‚¹ãƒˆ
  - `j` â†’ `j` â†’ `o` â†’ `j` â†’ `j` â†’ `q` (ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³+ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼)
  - `P` â†’ `Enter` (ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’é–‰ã˜ã‚‹)
  - `/` â†’ `test` â†’ `Enter` â†’ `n` (æ¤œç´¢ã‚·ãƒ¼ã‚±ãƒ³ã‚¹)
- [x] è¤‡åˆæ“ä½œã®ãƒ†ã‚¹ãƒˆ
  - é¸æŠ â†’ ã‚³ãƒ”ãƒ¼ â†’ ç§»å‹• â†’ ãƒšãƒ¼ã‚¹ãƒˆ
  - ãƒªãƒãƒ¼ãƒ  â†’ ã‚­ãƒ£ãƒ³ã‚»ãƒ« â†’ ãƒªãƒãƒ¼ãƒ  â†’ ç¢ºå®š
  - ä½œæˆ â†’ å‰Šé™¤
  - å±•é–‹ â†’ ãƒŠãƒ“ã‚²ãƒ¼ãƒˆ â†’ å…¨æŠ˜ã‚ŠãŸãŸã¿
  - ã‚«ãƒƒãƒˆ â†’ ãƒšãƒ¼ã‚¹ãƒˆï¼ˆç§»å‹•ï¼‰
- [x] PR: `test: Add operation sequence tests`

### 13.4 ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** ä¸­

- [x] ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®æ“ä½œ
- [ ] æ¨©é™ã®ãªã„ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆCIç’°å¢ƒã§ã®åˆ¶ç´„ã«ã‚ˆã‚Šä¿ç•™ï¼‰
- [x] ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯
- [x] éå¸¸ã«æ·±ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
- [x] å¢ƒç•ŒãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå…ˆé ­/æœ«å°¾ã§ã®ç§»å‹•ï¼‰
- [x] ç‰¹æ®Šæ–‡å­—ãƒ»Unicodeæ–‡å­—ã®ãƒ•ã‚¡ã‚¤ãƒ«å
- [x] ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- [x] PR: `test: Add edge case behavioral tests` (#40)

**æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ:**
- v0.6.1ã§ç™ºè¦‹ã•ã‚ŒãŸã‚ˆã†ãªãƒã‚°ã®æ—©æœŸæ¤œå‡º
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ™‚ã®å›å¸°ãƒ†ã‚¹ãƒˆ
- æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®å®‰å…¨æ€§ç¢ºä¿

---

## Phase 14: Side Preview Focus Management

**ãƒªãƒªãƒ¼ã‚¹:** v0.7.0

### èƒŒæ™¯
ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºä¸­ã«çŸ¢å°ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã¯ãªããƒ•ã‚¡ã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒç™ºç”Ÿã™ã‚‹ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã‚’èª­ã¿ãŸã„å ´åˆã€ç›´æ„Ÿçš„ã§ãªã„æ“ä½œãŒå¿…è¦ã«ãªã‚‹ã€‚

### 14.1 ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çŠ¶æ…‹ã®ç®¡ç†
**å„ªå…ˆåº¦:** é«˜

- [x] AppStateã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çŠ¶æ…‹ã‚’è¿½åŠ 
  - `FocusTarget` enum: `Tree`, `Preview`
  - ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºæ™‚ã®ã¿æœ‰åŠ¹
- [x] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯
  - `Tab`ã‚­ãƒ¼ã§ãƒˆã‚°ãƒ«
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼éè¡¨ç¤ºæ™‚ã¯å¸¸ã«Tree

### 14.2 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œ
**å„ªå…ˆåº¦:** é«˜

- [x] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã«å¿œã˜ãŸã‚­ãƒ¼å‹•ä½œ
  - Tree: `j/k/â†‘/â†“` ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
  - Preview: `j/k/â†‘/â†“` ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- [x] ãã®ä»–ã®ã‚­ãƒ¼å‹•ä½œ
  - `g/G`: å…ˆé ­/æœ«å°¾ã¸ç§»å‹•ï¼ˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œï¼‰
  - `b/f`: ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ï¼‰
  - `Esc`: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ â†’ Treeã«æˆ»ã‚‹

### 14.3 ãƒã‚¦ã‚¹æ“ä½œã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œ
**å„ªå…ˆåº¦:** é«˜

- [x] ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ‡ã‚Šæ›¿ãˆ
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é ˜åŸŸã‚¯ãƒªãƒƒã‚¯ â†’ Previewã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
  - ãƒ„ãƒªãƒ¼é ˜åŸŸã‚¯ãƒªãƒƒã‚¯ â†’ Treeã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
- [x] ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œ
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é ˜åŸŸã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  - ãƒ„ãƒªãƒ¼é ˜åŸŸã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« â†’ ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

### 14.4 è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
**å„ªå…ˆåº¦:** ä¸­

- [x] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
  - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®ã‚ã‚‹ãƒ‘ãƒãƒ«ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’ã‚·ã‚¢ãƒ³è‰²ã§ãƒã‚¤ãƒ©ã‚¤ãƒˆ
  - ã‚µã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºæ™‚ã®ã¿è¡¨ç¤º

### 14.5 ãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** ä¸­

- [x] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆï¼ˆ8ä»¶ï¼‰
- [x] ã‚­ãƒ¼æ“ä½œã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œãƒ†ã‚¹ãƒˆï¼ˆ8ä»¶ï¼‰
- [x] PR: `feat: Add side preview focus management` (#41)

---

## Phase 15: Terminal Image Protocol Support

**ãƒªãƒªãƒ¼ã‚¹:** v0.8.0

### èƒŒæ™¯
ç¾åœ¨ã®åŠãƒ–ãƒ­ãƒƒã‚¯æ–‡å­—ã«ã‚ˆã‚‹ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯è§£åƒåº¦ãŒä½ãã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãªã©ã®
ç´°ã‹ã„ãƒ‡ã‚£ãƒ†ãƒ¼ãƒ«ãŒã‚ã‚‹ç”»åƒãŒãƒ¢ã‚¶ã‚¤ã‚¯çŠ¶ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ãƒ¢ãƒ€ãƒ³ãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯é«˜å“è³ªãª
ç”»åƒãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã«å¯¾å¿œã™ã‚‹ã“ã¨ã§å¤§å¹…ãªå“è³ªå‘ä¸ŠãŒå¯èƒ½ã€‚

### å¯¾å¿œãƒ—ãƒ­ãƒˆã‚³ãƒ«

| ãƒ—ãƒ­ãƒˆã‚³ãƒ« | å¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ« | å„ªå…ˆåº¦ |
|-----------|---------------|--------|
| **Sixel** | Ghostty, iTerm2, WezTerm, mlterm, foot, xterm | é«˜ |
| **Kitty** | Kitty | ä¸­ |
| **iTerm2** | iTerm2, WezTerm | ä¸­ |
| **åŠãƒ–ãƒ­ãƒƒã‚¯** | å…¨ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ | å¿…é ˆ |

### 15.1 ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ 
**å„ªå…ˆåº¦:** é«˜

- [x] ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ¤œå‡ºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ
  - `render/terminal.rs` æ–°è¦ä½œæˆ
  - `TerminalKind` enum: Ghostty, Kitty, ITerm2, WezTerm, VSCode, WindowsTerminal, TerminalApp, Alacritty, Foot, Mlterm, Xterm, Unknown
  - `ImageProtocol` enum: Sixel, Kitty, ITerm2, HalfBlock
- [x] ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ¤œå‡º
  - `TERM_PROGRAM`: iTerm.app, vscode, etc.
  - `GHOSTTY_RESOURCES_DIR`: Ghosttyæ¤œå‡º
  - `KITTY_WINDOW_ID`: Kittyæ¤œå‡º
  - `WEZTERM_EXECUTABLE`: WezTermæ¤œå‡º
  - `WT_SESSION`: Windows Terminalæ¤œå‡º
  - `TERM`: xterm-256color, foot, mlterm, etc.
- [x] æœ€é©ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠãƒ­ã‚¸ãƒƒã‚¯
  - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã”ã¨ã«æœ€é©ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’è¿”ã™
  - æœªçŸ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯åŠãƒ–ãƒ­ãƒƒã‚¯ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [x] PR: `feat: Add terminal detection system` (#43)

### 15.2 Sixelãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
**å„ªå…ˆåº¦:** é«˜

- [x] Sixelã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼å®Ÿè£…
  - ä¾å­˜: ãªã—ï¼ˆæ‰‹å‹•å®Ÿè£…ï¼‰
  - ç”»åƒã‚’Sixelã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã«å¤‰æ›
  - ãƒ‘ãƒ¬ãƒƒãƒˆæœ€é©åŒ–ï¼ˆ256è‰²åˆ¶é™ï¼‰
  - RLEã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- [x] Sixelãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°
  - `encode_sixel()`, `render_sixel_image()`, `write_sixel()`
- [x] ã‚µã‚¤ã‚ºèª¿æ•´ãƒ»ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒ
- [x] PR: `feat: Implement Sixel image protocol` (#43)

### 15.3 Kittyãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
**å„ªå…ˆåº¦:** ä¸­

- [x] Kittyã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
  - Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
  - ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²é€ä¿¡
  - ç”»åƒé…ç½®åˆ¶å¾¡
  - RGB/RGBA/PNGå½¢å¼ã‚µãƒãƒ¼ãƒˆ
- [x] Kittyãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°
  - `encode_kitty()`, `render_kitty_image()`, `write_kitty()`
  - `delete_kitty_image()`, `clear_kitty_images()`
- [x] PR: `feat: Implement Kitty image protocol` (#43)

### 15.4 iTerm2ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
**å„ªå…ˆåº¦:** ä¸­

- [x] iTerm2ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸å®Ÿè£…
  - Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
  - OSCã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
  - PNG/JPEGå½¢å¼ã‚µãƒãƒ¼ãƒˆ
- [x] iTerm2ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°
  - `encode_iterm2()`, `render_iterm2_image()`, `write_iterm2()`
- [x] PR: `feat: Implement iTerm2 image protocol` (#43)

### 15.5 çµ±åˆãƒ»è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
**å„ªå…ˆåº¦:** é«˜

- [x] çµ±åˆãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼å®Ÿè£…
  - `render/image.rs` - çµ±åˆç”»åƒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  - `ImageRenderResult` enum: Widget (HalfBlock), EscapeSequence (Sixel/Kitty/iTerm2)
  - `render_image()` - ãƒ—ãƒ­ãƒˆã‚³ãƒ«è‡ªå‹•é¸æŠ
- [x] ãƒ—ãƒ­ãƒˆã‚³ãƒ«è‡ªå‹•é¸æŠ
  - ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ¤œå‡º
  - æœ€é©ãªãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚’é¸æŠ
  - `force_protocol` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸Šæ›¸ãå¯èƒ½
- [x] PR: `feat: Integrate image protocol auto-switching` (#43)

### 15.6 ãƒ†ã‚¹ãƒˆ
**å„ªå…ˆåº¦:** é«˜

- [x] ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ¤œå‡ºãƒ†ã‚¹ãƒˆ
  - å„ç’°å¢ƒå¤‰æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆ
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œãƒ†ã‚¹ãƒˆ
- [x] Sixelã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
  - åŸºæœ¬çš„ãªã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
  - ãƒ‘ãƒ¬ãƒƒãƒˆç”Ÿæˆãƒ†ã‚¹ãƒˆ
  - å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆï¼ˆæ¥µå°/æ¥µå¤§ç”»åƒï¼‰
  - ãƒãƒ«ãƒã‚«ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
- [x] Kittyãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ†ã‚¹ãƒˆ
  - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
  - ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ãƒ†ã‚¹ãƒˆ
  - RGB/RGBA/PNGå½¢å¼ãƒ†ã‚¹ãƒˆ
- [x] iTerm2ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ†ã‚¹ãƒˆ
  - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
  - Base64ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
- [x] çµ±åˆãƒ†ã‚¹ãƒˆ
  - ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠãƒ†ã‚¹ãƒˆ
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
  - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆ1x1ç”»åƒã€å¤§ç”»åƒã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼‰
- [x] PR: `test: Add image protocol tests` (#43)

### 15.7 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»CLI
**å„ªå…ˆåº¦:** ä¸­

- [ ] READMEæ›´æ–°
  - å¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸€è¦§
  - ç”»åƒãƒ—ãƒ­ãƒˆã‚³ãƒ«èª¬æ˜
- [ ] CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
  - `--image-protocol <auto|sixel|kitty|iterm2|halfblock>`
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: auto
- [ ] PR: `docs: Add image protocol documentation`

### å¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸€è¦§

| ã‚¿ãƒ¼ãƒŸãƒŠãƒ« | OS | Sixel | Kitty | iTerm2 | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | å‚™è€ƒ |
|-----------|-----|-------|-------|--------|--------------|------|
| Ghostty | macOS/Linux | âœ… | âŒ | âŒ | âœ… | |
| Kitty | macOS/Linux | âŒ | âœ… | âŒ | âœ… | |
| iTerm2 | macOS | âœ… | âŒ | âœ… | âœ… | |
| WezTerm | å…¨OS | âœ… | âŒ | âœ… | âœ… | |
| VS Code | å…¨OS | âœ… | âŒ | âŒ | âœ… | `terminal.integrated.enableImages: true` å¿…è¦ |
| Terminal.app | macOS | âŒ | âŒ | âŒ | âœ… | Sixeléå¯¾å¿œ |
| Windows Terminal | Windows | âœ… | âŒ | âŒ | âœ… | v1.22+ï¼ˆ2025å¹´2æœˆã€œï¼‰ |
| Alacritty | å…¨OS | âŒ | âŒ | âŒ | âœ… | Sixelå¯¾å¿œäºˆå®šãªã— |
| foot | Linux | âœ… | âŒ | âŒ | âœ… | |
| mlterm | å…¨OS | âœ… | âŒ | âŒ | âœ… | |
| xterm | å…¨OS | âœ…* | âŒ | âŒ | âœ… | *ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ |

### æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ
- Sixelå¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§é«˜å“è³ªãªç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- Kittyãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æœ€é«˜å“è³ªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æä¾›
- éå¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚‚å‹•ä½œä¿è¨¼ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠå¯èƒ½

---

## Module Structure

```
src/
â”œâ”€â”€ main.rs
â”œâ”€â”€ lib.rs
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ state.rs     # AppState
â”‚   â””â”€â”€ mode.rs      # ViewMode
â”œâ”€â”€ tree/
â”‚   â”œâ”€â”€ node.rs      # TreeEntry
â”‚   â””â”€â”€ navigator.rs # TreeNavigator
â”œâ”€â”€ action/
â”‚   â”œâ”€â”€ file.rs      # ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
â”‚   â””â”€â”€ clipboard.rs # ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰
â”œâ”€â”€ render/
â”‚   â”œâ”€â”€ tree.rs      # ãƒ„ãƒªãƒ¼æç”»
â”‚   â”œâ”€â”€ preview.rs   # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
â”‚   â””â”€â”€ status.rs    # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
â”œâ”€â”€ handler/
â”‚   â”œâ”€â”€ key.rs       # ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
â”‚   â””â”€â”€ mouse.rs     # ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
â”œâ”€â”€ integrate/
â”‚   â”œâ”€â”€ pick.rs      # --pick ãƒ¢ãƒ¼ãƒ‰
â”‚   â””â”€â”€ callback.rs  # --on-select
â””â”€â”€ git/
    â””â”€â”€ status.rs    # GitçŠ¶æ…‹ç®¡ç† (v0.2.0)
```
